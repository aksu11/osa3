{"version":3,"sources":["services/persons.js","components/Notification.js","components/Filter.js","components/Add.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","then","response","data","delete","Notification","message","className","kind","content","Filter","value","handle","onChange","Add","name","number","nameChange","numberChange","submitForm","onSubmit","type","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","filtered","setFiltered","notification","setNotification","useEffect","personService","removePerson","window","confirm","person","setTimeout","catch","error","updatePerson","newPerson","console","log","oldPersons","concat","sort","a","b","event","target","toLocaleLowerCase","includes","preventDefault","index","map","indexOf","key","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.80bee251.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { getAll, create, update, remove }","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) return null\n  return (<div className={message.kind}> {message.content} </div>)\n}\n\nexport default Notification","import React from 'react'\n\nconst Filter = ({value, handle}) => {\n  return(\n    <div>\n      filter shown with <input value={value} onChange={handle} />\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst Add = ({name, number, nameChange, numberChange, submitForm}) => {\n  return (\n    <form onSubmit={submitForm}>\n      <div>\n        name: <input value={name} onChange={nameChange}/>\n      </div>\n      <div>\n        number: <input value={number} onChange={numberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default Add","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport Filter from './components/Filter'\nimport Add from './components/Add'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ filtered, setFiltered ] = useState([])\n  const [ notification, setNotification ] = useState(null)\n\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(response => {\n      setPersons(response.data)\n      } )\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const names = persons.map(person => person.name)\n    const index = names.indexOf(newName)\n    if (index > -1) {\n      if(window.confirm(newName + ' is allready added to phonebook, replace old number with new one?')) {\n        updatePerson(persons[index])\n        return\n      }\n    }\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n    personService.create(person)\n      .then(response => {\n        console.log(person)\n        setPersons(persons.concat(response.data))\n        setNewName('')\n        setNewNumber('')\n        setNotification({kind: 'note', content: person.name + ' was added succesfully'})\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000);\n      })\n      .catch(error => {\n        setNotification({kind: 'error', content: error.response.data.error})\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000);\n      })\n  }\n\n  const removePerson = (name, id) => {\n    return () => {\n      if(window.confirm(`Delete ${name} ?`)) {\n        personService.remove(id)\n          .then(response => {\n            setPersons(persons.filter(person => person.id !== id))\n            setNotification({kind: 'note', content: `${name} was removed succesfully`})\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000);\n          })\n          .catch(error => {\n            setPersons(persons.filter(person => person.id !== id))\n            setNotification({kind: 'error', content: `${name} has allready removed from server`})\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000);\n          })\n      }\n    }\n  }\n\n  const updatePerson = (person) => {\n    const newPerson = {\n      name: person.name,\n      number: newNumber,\n    }\n    personService.update(person.id, newPerson)\n      .then(response => {\n        console.log(response)\n        const oldPersons = persons.filter(person => person.id !== response.id)\n        setPersons(oldPersons.concat(response).sort((a,b) => a.id - b.id))\n        setNewName('')\n        setNewNumber('')\n        setNotification({kind: 'note', content: `${person.name} has been updated`})\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.data)\n        setNotification({kind: 'error', content: `Information of ${person.name} has allready been removed from server`})\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000)\n      })\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n    if(event.target.value !== '') setFiltered(persons.filter(person => person.name.toLocaleLowerCase().includes(event.target.value.toLocaleLowerCase())))\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <Filter value={filter} handle={handleFilterChange} />\n      <h2>Add new</h2>\n      <Add name={newName} nameChange={handleNameChange} number={newNumber} numberChange={handleNumberChange} submitForm={addPerson} />\n      <h2>Numbers</h2>\n      <table>\n        <tbody>\n          {filter === '' ?\n          persons.map((person) => <tr key={person.name}><td>{person.name}</td><td>{person.number}</td>\n          <td><button onClick={removePerson(person.name, person.id)}>delete</button></td></tr>) :\n          filtered.map((person) => <tr key={person.name}><td>{person.name}</td><td>{person.number}</td>\n          <td><button onClick={removePerson(person.name, person.id)}>delete</button></td></tr>)\n          }\n        </tbody>\n      </table>\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}